<html>
<head>
 <title>mod_qos, qsfilter2</title>
<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1">
<meta name="author" content="Pascal Buchbinder">
<link rel="shortcut icon" href="favicon.ico" />
<style TYPE="text/css">
<!--  
  body {
	background-color: white;
	color: black;
	font-family: arial, helvetica, verdana, sans-serif;
	font-weight: normal;
	text-align: left;
  }
-->
</style>
</head>
<body>
<!--

 Quality of service module for Apache Web Server.

 See http://sourceforge.net/projects/mod-qos/ for further details.

 Copyright (C) 2007 Pascal Buchbinder

 This program is free software; you can redistribute it and/or
 modify it under the terms of the GNU General Public License
 as published by the Free Software Foundation; either version 2
 of the License, or (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program; if not, write to the Free Software
 Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston,
 MA 02110-1301, USA.

-->
<table>
<tbody>
<tr><td>&nbsp;</td><td style="vertical-align: bottom;"><h4>mod_qos, qsfilter2</h4></td></tr>
<tr><td>&nbsp;</td><td>
<p>
mod_qos implements a request filter validating each request line. The module 
supports both, negative and positive security model. The QS_Deny* 
directives are used to specify request line patterns which are not allowed 
to access the server (negative security model / blacklist). These rules 
are used to restrict access to certain resources which should not be 
available to users or to protect the server from malicious patterns.
</p>
<p>
Ths QS_Permit* rules implement a positive security model (whitelist). 
These directives are used to define allowed request line patterns. 
Request which do not match any of thses patterns are not allowed to 
access the server.
</p>
<p>
qsfilter2 is an access log analyzer used to generate request line whitelists 
which may be used by mod_qos in order to restrict server access to known 
resources only. It parses existing access log files in order to generate 
request line patterns cover all allowed request URIs.
</p>
<img src="qsfilter2_process.gif" alt="qsfilter2 usage, overview">
<p>
Rule generation requires the following input:
<ul>
<li>
Existing access log data: Request URIs from existing access log files 
are the main input data used by qsfilter2. qsfilter2 reads this data 
from an input file. Each line of the input file contains a request 
URI consiting of a path and and query. These access log data must 
include current request URIs but also request lines from previous 
rule generation steps. It must also include request lines which 
cover manually generated rules.
</li>
</ul>
<table border="0" cellspacing="5" cellpadding="10" width="100%">
<tr><td bgcolor="#EBEDF5">
Example input file loc.txt:<br>
<pre>
/aaa/index.do
/aaa/edit?image=1.jpg
/aaa/image/1.jpg
/aaa/view?page=1
/aaa/edit?document=1
</pre>
</td></tr>
</table>
<ul>
<li>
Predefined rules: qsfilter2 generates rules from access log data 
automatically. Manually generated rules may be provided from a separate 
rule file (each manual rule must be represented by a request URI in 
the input data in order to make sure not to be deleted by the rule 
optimisation algorithm of qsfilter2.
</li>
</ul>
<ul>
<li>
Blacklist: QS_Deny* rules may be used to filter request lines which 
should not be used for whitelist rule generation.
</li>
</ul>
<table border="0" cellspacing="5" cellpadding="10" width="100%">
<tr><td bgcolor="#EBEDF5">
Example input rule file qos_filter.conf:<br>
<pre>
# Predefined: manually defined whitelist rule:
QS_PermitUri +view deny "^[/a-zA-Z0-9]+/view\?(page=[0-9]+)?$"

# Blacklist: filters unwanted request line patterns:
QS_DenyRequestLine +printable deny ".*[\x00-\x19].*"
</pre>
</td></tr>
</table>

</p>


<br>
<hr>
<a href="http://sourceforge.net/projects/mod-qos/"><img align="right" src="http://sflogo.sourceforge.net/sflogo.php?group_id=196697&amp;type=1" width="88" height="31" border="0" alt="mod_qos at SourceForge.net" /></a>
<SMALL><SMALL>&copy; 2007, Pascal Buchbinder</SMALL></SMALL>
</body>
</html>
