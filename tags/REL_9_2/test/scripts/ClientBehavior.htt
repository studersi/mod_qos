#
# $Id: ClientBehavior.htt,v 1.1 2009-09-16 13:20:31 pbuchbinder Exp $
#


INCLUDE scripts/ports

CLIENT

_LOOP 51

_REQ localhost $QS_PORT_BASE
__GET /htt/index1.html HTTP/1.1
__Host: localhost
__Connection: keep-alive
__
_EXPECT . "200"
_EXPECT . "==html=="
_WAIT

_LOOP 4
_REQ localhost $QS_PORT_BASE
__GET /htt/start.js HTTP/1.1
__Host: localhost
__Connection: keep-alive
__
_EXPECT . "200"
_EXPECT . "==js=="
_WAIT
_END LOOP

_LOOP 2
_REQ localhost $QS_PORT_BASE
__GET /htt/style.css HTTP/1.1
__Host: localhost
__Connection: keep-alive
__
_EXPECT . "200"
_EXPECT . "==css=="
_WAIT
_END LOOP

_LOOP 10
_REQ localhost $QS_PORT_BASE
__GET /htt/pic.jpg HTTP/1.1
__Host: localhost
__Connection: keep-alive
__
_EXPECT . "200"
_EXPECT . "==jpg=="
_WAIT
_END LOOP

_REQ localhost $QS_PORT_BASE
__GET /htt/doc.pfg HTTP/1.1
__Host: localhost
__Connection: keep-alive
__
_EXPECT . "200"
_EXPECT . "==pdf=="
_WAIT

_LOOP 10
_REQ localhost $QS_PORT_BASE
__GET /htt/pic.jpg HTTP/1.1
__Host: localhost
__Connection: keep-alive
__
_EXPECT . "304"
_WAIT
_END LOOP

_CLOSE

_END LOOP

_LOOP 12
_REQ server1 $QS_PORT_BASE1
__GET /htt/index1.html HTTP/1.1
__Host: localhost
__Connection: keep-alive
__
_EXPECT . "200"
_EXPECT . "==html=="
_WAIT
_END LOOP

_REQ server1 $QS_PORT_BASE1
__GET /htt/index1.html HTTP/1.1
__Host: localhost
__Connection: keep-alive
__
_EXPECT . "HTTP/1.1. 200 10 .-. 0 - r; 1"
_EXPECT . "HTTP/1.1. 200 10 .-. 0 - - 1"
_WAIT

END

SERVER $QS_PORT_BASE6

_LOOP 51

_RES
_WAIT
__HTTP/1.1 200 OK
__Content-Length: AUTO 
__Content-Type: text/html
__
__==html==

_LOOP 4
_RES
_WAIT
__HTTP/1.1 200 OK
__Content-Length: AUTO 
__Content-Type: application/x-javascript
__
__==js==
_END LOOP

_LOOP 2
_RES
_WAIT
__HTTP/1.1 200 OK
__Content-Length: AUTO 
__Content-Type: text/css
__
__==css==
_END LOOP

_LOOP 10
_RES
_WAIT
__HTTP/1.1 200 OK
__Content-Length: AUTO 
__Content-Type: image/jpg
__
__==jpg==
_END LOOP

_RES
_WAIT
__HTTP/1.1 200 OK
__Content-Length: AUTO 
__Content-Type: application/pdf
__
__==pdf==

_LOOP 10
_RES
_WAIT
__HTTP/1.1 304 Not Modified
__Content-Length: 0
__
_END LOOP

_CLOSE

_END LOOP

_LOOP 12
_RES
_WAIT
__HTTP/1.1 200 OK
__Content-Length: AUTO 
__Content-Type: text/html
__
__==html==
_END LOOP

_RES
_WAIT
__HTTP/1.1 200 OK
__Content-Length: AUTO 
__Content-Type: text/html
__
_PIPE
_EXEC tail -5 ./logs/access_log

END
